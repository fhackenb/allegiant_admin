<div class="dashboard grey lighten-3" ng-controller="ControlsController">
  <div class="row no-gutter">
    
    <div ng-show="data.device._id != undefined" style="text-align:center" class="well white">
      <form class="form-inline">
        <fieldset>
          <legend>Device: {{data.device.id}}</legend>
          <br/>
        </fieldset>
      </form>
      <b>
        Total Attempts: {{deviceInfo.total}}
        Total Submissions: {{deviceInfo.success}}
        Submission Rate: {{deviceInfo.successRate | number: 2}}%
      </b>
      <br />
      <div class="table-responsive well no-padding white no-margin">
          <table class="table table-full m-b-60" id="table-area-1" fsm-big-data="data of routes take 30">
            <thead>
            <tr fsm-sticky-header scroll-body="'#table-area-1'" scroll-stop="64">
              <th><b>Day</b></th>
              <th>Sunday</th>
              <th>Monday</th>
              <th>Tuesday</th>
              <th>Wednesday</th>
              <th>Thursday</th>
              <th>Friday</th>
              <th>Saturday</th>
            </tr>
            </thead>
            <tbody>
              <tr>
                <td style="text-align:left">Start</td>
                <td style="text-align:left" ng-repeat="num in [0,1,2,3,4,5,6]">
                  <div class="form-group">
                    <label class="control-label">Start</label>
                    <select ng-change="forceModel(num)" ng-model="schedule[num].startTime" class="form-control">
                      <option value="{{time.seconds}}" ng-repeat="time in possibleTimes">
                        <span>{{time.timeString}}</span>
                      </option>
                    </select>
                    
                    
                  </div>
                </td>
              </tr>
              <tr>
                <td style="text-align:left">Stop</td>
                <td style="text-align:left" ng-repeat="num in [0,1,2,3,4,5,6]">
                  <div class="form-group">
                    <label class="control-label">End</label>
                    <select ng-change="forceModel(num)" ng-model="schedule[num].endTime" class="form-control">
                      <option ng-show="isLater(time.seconds,num)" value="{{time.seconds}}" ng-repeat="time in possibleTimes">
                        <span>{{time.timeString}}</span>
                      </option>
                    </select>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <button class="btn btn-success" ng-click="editSchedule()" >Update Schedule</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
    </div>
    
    
    <div ng-show="newSchedule" style="text-align:center" class="well white">
      <form class="form-inline">
        <fieldset>
          <legend>Schedule All Devices</legend>
          <br/>
        </fieldset>
      </form>
      
    <div class="table-responsive well no-padding white no-margin">
          <table class="table table-full m-b-60" id="table-area-1" fsm-big-data="data of routes take 30">
            <thead>
            <tr fsm-sticky-header scroll-body="'#table-area-1'" scroll-stop="64">
              <th><b>Day</b></th>
              <th>Sunday</th>
              <th>Monday</th>
              <th>Tuesday</th>
              <th>Wednesday</th>
              <th>Thursday</th>
              <th>Friday</th>
              <th>Saturday</th>
            </tr>
            </thead>
            <tbody>
              <tr>
                <td style="text-align:left">Start</td>
                <td style="text-align:left" ng-repeat="num in [0,1,2,3,4,5,6]">
                  <div class="form-group">
                    <label class="control-label">Start</label>
                    <select ng-change="forceModel(num)" ng-model="schedule[num].startTime" class="form-control">
                      <option value="{{time.seconds}}" ng-repeat="time in possibleTimes">
                        <span>{{time.timeString}}</span>
                      </option>
                    </select>
                    
                    
                  </div>
                </td>
              </tr>
              <tr>
                <td style="text-align:left">Stop</td>
                <td style="text-align:left" ng-repeat="num in [0,1,2,3,4,5,6]">
                  <div class="form-group">
                    <label class="control-label">End</label>
                    <select ng-change="forceModel(num)" ng-model="schedule[num].endTime" class="form-control">
                      <option ng-show="isLater(time.seconds,num)" value="{{time.seconds}}" ng-repeat="time in possibleTimes">
                        <span>{{time.timeString}}</span>
                      </option>
                    </select>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <button class="btn btn-success" ng-click="updateScheduleAll()" >Update ALL</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
    </div>
    
    
    
    <div class="table-responsive well no-padding white no-margin">
      <h3 class="table-title">Schedules</h3>

      <table class="table table-full m-b-60" id="table-area-1" fsm-big-data="data of routes take 30">
        <thead>
        <tr fsm-sticky-header scroll-body="'#table-area-1'" scroll-stop="64">
          <th>Device Id</th>
          <th>Account Name</th>
          <th>Current Status</th>
          <th>Today Start</th>
          <th>Today Stop</th>
          <th><center>Actions</center></th>
        </tr>
        </thead>
        <tbody>
          <tr ng-repeat="(key, item) in computers" ng-click="toggleDevice(item)"  ng-dblclick="editItem(item)">
            
            <td>{{item.id | limitTo: 15}}...</td>
            <td> 
              None Assigned
            </td>
            <td>
              <span ng-if="item.allowed && !item.terminated">
                Active
              </span>
              <span ng-if="!item.allowed && !item.terminated">
                Inactive
              </span>
              <span ng-if="item.terminated">
                Terminated
              </span>
            </td>
            <td>
              <span ng-if="item.schedule[today.day].startTime.length == 0">
                No Schedule
              </span>
              <span ng-if="item.schedule[today.day].startTime.length > 0">
                {{item.schedule[today.day].startTimeString}}
              </span>
            </td>
            <td>
              <span ng-if="item.schedule[today.day].endTime.length == 0">
                No Schedule
              </span>
              <span ng-if="item.schedule[today.day].endTime.length > 0">
                {{item.schedule[today.day].endTimeString}}
              </span>
            </td>
            <td class="text-right" ng-click="$event.stopPropagation()">
              <button type="button" class="btn btn-link btn-round" data-title="View item" ng-click="toggleDevice(item)"><i class="md md-search"></i></button>
              <button type="button" class="btn btn-link btn-round" data-title="Delete item" ng-click="remove(item)"><i class="md md-delete"></i></button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- footer -->
    <div class="footer-buttons">
      <div class="btn btn-default btn-round btn-lg m-r-10 btn-footer" scroll-to="top" ng-hide="scroll<100" data-title="Scroll to top" bs-tooltip><i class="md md-arrow-drop-up"></i></div>
      <div class="btn btn-primary btn-round btn-lg" ng-click="openNewSchedule()" data-title="New Schedule" bs-tooltip><i class="md md-add"></i></div>
    </div>
    
    
  </div>
</div>
